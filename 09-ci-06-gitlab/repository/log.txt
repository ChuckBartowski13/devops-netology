Running with gitlab-runner 16.8.0 (c72a09b6)
  on test 5jsTSo5mD, system ID: s_68b9cecd5400
Preparing the "shell" executor
00:00
Using Shell (bash) executor...
Preparing environment
00:00
Running on localhost.localdomain...
Getting source from Git repository
00:01
Fetching changes with git depth set to 20...
Reinitialized existing Git repository in /home/admin/builds/5jsTSo5mD/0/ret1/devops-netology/.git/
Checking out 5d81be74 as detached HEAD (ref is main)...
Skipping Git submodules setup
Executing "step_script" stage of the job script
00:03
$ docker build -t $CI_REGISTRY/ret1/devops-netology/python-api:gitlab-$CI_COMMIT_SHORT_SHA .
#0 building with "default" instance using docker driver
#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 279B done
#1 DONE 0.0s
#2 [internal] load metadata for docker.io/centos/python-38-centos7:latest
#2 DONE 1.1s
#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s
#4 [1/3] FROM docker.io/centos/python-38-centos7:latest@sha256:4b66b1a8da1cba90313da11b518852baf120f6bba794d6ece2abde4d54cebb1a
#4 DONE 0.0s
#5 [internal] load build context
#5 transferring context: 94B done
#5 DONE 0.0s
#6 [2/3] RUN pip install flask flask_restful flask-jsonpify
#6 CACHED
#7 [3/3] COPY python-api.py /python-api/python-api.py
#7 CACHED
#8 exporting to image
#8 exporting layers done
#8 writing image sha256:973125620429c85307906d2c8862ee8ce2d16a7e4829a999136bfd1a8182a7ff done
#8 naming to 192.168.1.93:5005/ret1/devops-netology/python-api:gitlab-5d81be74 done
#8 DONE 0.0s
$ docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD $CI_REGISTRY
WARNING! Using --password via the CLI is insecure. Use --password-stdin.
WARNING! Your password will be stored unencrypted in /home/admin/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store
Login Succeeded
$ docker push $CI_REGISTRY/ret1/devops-netology/python-api:gitlab-$CI_COMMIT_SHORT_SHA
The push refers to repository [192.168.1.93:5005/ret1/devops-netology/python-api]
21c77685b734: Preparing
4d1bc9834883: Preparing
c2f3ac6ca11d: Preparing
b944e0b64a51: Preparing
c0dc5fde85ba: Preparing
1030e34f7f41: Preparing
4eb735472655: Preparing
4723c2f8b39b: Preparing
96c3e66225c5: Preparing
b53a66890a58: Preparing
46d98914fe04: Preparing
53498d66ad83: Preparing
96c3e66225c5: Waiting
b53a66890a58: Waiting
1030e34f7f41: Waiting
46d98914fe04: Waiting
53498d66ad83: Waiting
4eb735472655: Waiting
4723c2f8b39b: Waiting
4d1bc9834883: Mounted from ret1/devops-netology/hello
21c77685b734: Mounted from ret1/devops-netology/hello
b944e0b64a51: Mounted from ret1/devops-netology/hello
c2f3ac6ca11d: Mounted from ret1/devops-netology/hello
c0dc5fde85ba: Mounted from ret1/devops-netology/hello
1030e34f7f41: Mounted from ret1/devops-netology/hello
4eb735472655: Mounted from ret1/devops-netology/hello
96c3e66225c5: Mounted from ret1/devops-netology/hello
4723c2f8b39b: Mounted from ret1/devops-netology/hello
b53a66890a58: Mounted from ret1/devops-netology/hello
46d98914fe04: Mounted from ret1/devops-netology/hello
53498d66ad83: Mounted from ret1/devops-netology/hello
gitlab-5d81be74: digest: sha256:cce877d02485a7b071be90624dabc28d3d65288fb769ed59aaaa2df0bb3faec9 size: 2841
Job succeeded
